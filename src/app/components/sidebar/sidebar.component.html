<button
  (click)="toggle()"
  class="fixed top-4 left-4 z-50 p-3 bg-white rounded-lg shadow-lg lg:hidden"
  [class.hidden]="isOpen()"
>
  <app-icon [name]="IconName.Menu" class="w-6 h-6" />
</button>
@if(isMobile() && isOpen()) {
<div
  class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
  (click)="close()"
></div>
}
<div
  [class]="
    isMobile()
      ? 'fixed inset-y-0 left-0 z-50 w-64 bg-white flex flex-col shadow-2xl transform transition-transform duration-300 ease-in-out'
      : 'w-64 bg-white flex flex-col'
  "
  [class.translate-x-0]="isMobile() ? isOpen() : true"
  [class.-translate-x-full]="isMobile() && !isOpen()"
>
  <div class="p-6 border-b border-gray-100 flex items-center justify-between">
    <img
      src="/images/thebridge_blue_logoweb.png"
      alt="The Bridge Logo"
      class="h-auto max-w-40"
    />
    <button
      *ngIf="isMobile()"
      (click)="close()"
      class="text-gray-500 hover:text-gray-700 lg:hidden"
    >
      <app-icon [name]="IconName.Close" class="w-6 h-6" />
    </button>
  </div>

  <nav class="flex-1 p-4 overflow-y-auto">
    <ul class="space-y-2">
      @for (item of getVisibleItems(); track item.route) {
      <li>
        <a
          [routerLink]="item.route"
          routerLinkActive="bg-primary-blue text-white"
          [routerLinkActiveOptions]="{ exact: false }"
          (click)="onNavClick()"
          class="flex items-center gap-3 px-4 py-3 rounded-xl font-light text-gray-700 hover:bg-gray-100 transition-colors"
        >
          <app-icon [name]="item.icon" class="w-5 h-5" />
          <span>{{ item.label }}</span>
        </a>
      </li>
      }
    </ul>
  </nav>

  <div class="p-4 border-t border-gray-100">
    <button
      type="button"
      (click)="logout()"
      [disabled]="isLoggingOut()"
      class="flex items-center justify-center gap-3 w-full px-4 py-3 rounded-xl bg-gray-200 font-light text-gray-700 hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
    >
      <app-icon [name]="IconName.Logout" class="w-5 h-5" />
      <span>Logout</span>
      @if (isLoggingOut()) {
      <app-icon
        [name]="IconName.Loading"
        class="w-5 h-5 ml-auto animate-spin"
      />
      }
    </button>
  </div>
</div>
